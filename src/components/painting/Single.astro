---
import type { ImageMetadata } from "astro"
import { Picture } from "astro:assets"

interface Props {
  painting: {
    title: string
    year: string
    filename: string
    width: string
    height: string
    slug: string
  }
}

const { painting } = Astro.props
const { title, year, width, height, filename, slug } = painting
const imagePath = `/src/assets/paintings/${filename}`
const images = import.meta.glob<{ default: ImageMetadata }>(
  `/src/assets/paintings/*.{jpeg,jpg,png,gif}`
)
if (!images[imagePath]) {
  throw new Error(
    `"${imagePath}" does not exist in glob: "/src/assets/paintings/*.{jpeg,jpg,png,gif}"`
  )
}
//scroll-mt-32 lg:scroll-mt-36 xl:scroll-mt-40 2xl:scroll-mt-44
---

<article
  id={slug}
  class="grid h-full justify-items-center md:grid-cols-2 md:items-center snap-center"
>
  <Picture src={images[imagePath]()} formats={["avif", "webp"]} alt={title} />
  <header>
    <h2 class="text-2xl text-center md:mb-8 md:text-4xl">{title}</h2>
    <p class="flex flex-row gap-2">
      <span class="tracking-widest text-right text-amber-900 basis-full">Ann√©e:</span>
      <span class="text-left basis-full"
        ><time datetime={year}>{year === "0" ? "NC" : year}</time></span
      >
    </p>
    <p class="flex flex-row gap-2">
      <span class="tracking-widest text-right text-amber-900 basis-full">Hauteur:</span>
      <span class="text-left basis-full">{height === "0" ? "NC" : height + " cm"}</span>
    </p>
    <p class="flex flex-row gap-2">
      <span class="tracking-widest text-right text-amber-900 basis-full">Largeur:</span>
      <span class="text-left basis-full">{width === "0" ? "NC" : width + " cm"}</span>
    </p>
  </header>
</article>

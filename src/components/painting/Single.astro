---
import type { ImageMetadata } from "astro"
import { Picture } from "astro:assets"

interface Props {
  painting: {
    title: string
    year: number
    filename: string
    width: number
    height: number
  }
}

const { painting } = Astro.props
const { title, year, width, height, filename } = painting
const imagePath = `/src/assets/paintings/normal/${filename}`
const images = import.meta.glob<{ default: ImageMetadata }>(
  `/src/assets/paintings/normal/*.{jpeg,jpg,png,gif}`
)
if (!images[imagePath]) {
  throw new Error(
    `"${imagePath}" does not exist in glob: "/src/assets/paintings/normal/*.{jpeg,jpg,png,gif}"`
  )
}
---

<article class="h-screen grid grid-cols-2 items-center justify-items-center text-center">
  <Picture src={images[imagePath]()} formats={["avif", "webp"]} alt={title} />
  <header>
    <h2 class="mb-8 text-4xl">{title}</h2>
    <ul>
      <li>
        <span class="mb-4 tracking-widest text-amber-900">Ann√©e:</span>
        <time datetime={String(year)}>{year}</time>
      </li>
      <li><span class="mb-4 tracking-widest text-amber-900">Hauteur:</span> {height} cm</li>
      <li><span class="mb-4 tracking-widest text-amber-900">Largeur:</span> {width} cm</li>
    </ul>
  </header>
</article>
